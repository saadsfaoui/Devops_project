<div class="column" *ngIf="data">
  <!-- City Info Card -->
  <div class="card" *ngIf="data.weather">
    <h2>{{ data.city }}</h2>
    <p class="subtitle">{{ data.weather.location?.country || 'Unknown' }}</p>
    <div class="info-grid">
      <div>
        Population<br>
        <strong>Data not available</strong>
      </div>
      <div>
        Time Zone<br>
        <strong>{{ data.weather.location?.tz_id || 'N/A' }}</strong>
      </div>
      <div>
        Local Time<br>
        <strong>{{ data.weather.location?.localtime?.split(' ')[1] || '—' }}</strong>
      </div>
    </div>
  </div>

  <!-- Climate Card -->
  <div class="card" *ngIf="data.weather">
    <h3>☀️ Climate</h3>
    
    <div class="weather-display" *ngIf="data.weather.current">
      <div class="weather-icon-section">
        <img 
          *ngIf="data.weather.current?.condition?.icon" 
          [src]="'https:' + data.weather.current.condition.icon" 
          alt="Weather condition"
          class="weather-icon-large"
        >
        <div *ngIf="!data.weather.current?.condition?.icon" class="weather-icon-placeholder">
          ☁️
        </div>
      </div>
      
      <div class="weather-info">
        <div class="temperature-display">
          <span class="temp-value">{{ data.weather.current?.temp_c || '—' }}°C</span>
          <span class="condition-text">{{ data.weather.current?.condition?.text || '—' }}</span>
        </div>
      </div>
    </div>

    <div class="info-grid">
      <div>
        Temperature<br>
        <strong>{{ data.weather.current?.temp_c || '—' }}°C</strong>
      </div>
      <div>
        Humidity<br>
        <strong>{{ data.weather.current?.humidity || '—' }}%</strong>
      </div>
      <div>
        Wind speed<br>
        <strong>{{ data.weather.current?.wind_kph || '—' }} km/h</strong>
      </div>
      <div>
        Feels Like<br>
        <strong>{{ data.weather.current?.feelslike_c || '—' }}°C</strong>
      </div>
      <div>
        Pressure<br>
        <strong>{{ data.weather.current?.pressure_mb || '—' }} mb</strong>
      </div>
      <div>
        Visibility<br>
        <strong>{{ data.weather.current?.vis_km || '—' }} km</strong>
      </div>
    </div>

    <div class="air-quality" *ngIf="data.airQuality">
      <div>
        PM2.5<br>
        <strong>{{ data.airQuality.pm25 || '—' }}</strong>
      </div>
      <div>
        AQI<br>
        <strong>{{ data.airQuality.aqi || '—' }}</strong>
      </div>
      <div>
        NO₂<br>
        <strong>{{ data.airQuality.no2 || '—' }}</strong>
      </div>
    </div>
  </div>

  <!-- Events Card -->
  <div class="card" *ngIf="data.events && data.events.length > 0">
    <h3>Upcoming Events</h3>
    <div>
      <strong>{{ data.events.length }} events</strong>
    </div>
    <div class="event" *ngFor="let event of data.events.slice(0, 2)">
      <div class="event-img" *ngIf="event.image" [style.background-image]="'url(' + event.image + ')'"></div>
      <div class="event-img" *ngIf="!event.image"></div>
      <div>
        <p class="event-title">{{ event.name }}</p>
        <p class="event-text">{{ event.date }} — {{ event.venue }}</p>
      </div>
    </div>
  </div>

  <!-- Bikes Card -->
  <div class="card" *ngIf="data.bikes">
    <h3>Bike Sharing</h3>
    <div *ngIf="data.bikes.stations && data.bikes.stations.length > 0">
      <strong>{{ data.bikes.name }}</strong>
      <p class="subtitle">{{ data.bikes.stations.length }} stations available</p>
      <div class="info-grid">
        <div>
          Free bikes<br>
          <strong>{{ data.bikes.stations[0]?.free_bikes || '—' }}</strong>
        </div>
        <div>
          Available slots<br>
          <strong>{{ data.bikes.stations[0]?.empty_slots || '—' }}</strong>
        </div>
      </div>
    </div>
    <div *ngIf="!data.bikes.stations || data.bikes.stations.length === 0">
      <p class="subtitle">No bike sharing available</p>
    </div>
  </div>
</div>

<div class="column empty" *ngIf="!data">
  <p class="subtitle">Select a city to compare</p>
</div>
