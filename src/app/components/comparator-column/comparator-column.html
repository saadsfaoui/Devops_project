<div class="column" *ngIf="data">
  <!-- City Image Card -->
  <div class="city-image-card" *ngIf="data.cityImage">
    <img [src]="data.cityImage" [alt]="data.city" class="city-image">
    <div class="image-overlay">
      <h1 class="city-name">{{ data.city }}</h1>
    </div>
  </div>

  <!-- City Info Card -->
  <div class="card" *ngIf="data.weather">
    <h2>{{ data.city }}</h2>
    <p class="subtitle">{{ data.weather.location?.country || 'Unknown' }}</p>
    <div class="info-grid">
      <div>
        Population<br>
        <strong>Data not available</strong>
      </div>
      <div>
        Time Zone<br>
        <strong>{{ data.weather.location?.tz_id || 'N/A' }}</strong>
      </div>
      <div>
        Local Time<br>
        <strong>{{ data.weather.location?.localtime?.split(' ')[1] || 'â€”' }}</strong>
      </div>
    </div>
  </div>

  <!-- Climate Card -->
  <div class="card" *ngIf="data.weather">
    <h3>â˜€ï¸ Climate</h3>
    
    <div class="weather-display" *ngIf="data.weather.current">
      <div class="weather-icon-section">
        <img 
          *ngIf="data.weather.current?.condition?.icon" 
          [src]="'https:' + data.weather.current.condition.icon" 
          alt="Weather condition"
          class="weather-icon-large"
        >
        <div *ngIf="!data.weather.current?.condition?.icon" class="weather-icon-placeholder">
          â˜ï¸
        </div>
      </div>
      
      <div class="weather-info">
        <div class="temperature-display">
          <span class="temp-value">{{ data.weather.current?.temp_c || 'â€”' }}Â°C</span>
          <span class="condition-text">{{ data.weather.current?.condition?.text || 'â€”' }}</span>
        </div>
      </div>
    </div>

    <div class="info-grid">
      <div>
        Temperature<br>
        <strong>{{ data.weather.current?.temp_c || 'â€”' }}Â°C</strong>
      </div>
      <div>
        Humidity<br>
        <strong>{{ data.weather.current?.humidity || 'â€”' }}%</strong>
      </div>
      <div>
        Wind speed<br>
        <strong>{{ data.weather.current?.wind_kph || 'â€”' }} km/h</strong>
      </div>
      <div>
        Feels Like<br>
        <strong>{{ data.weather.current?.feelslike_c || 'â€”' }}Â°C</strong>
      </div>
      <div>
        Pressure<br>
        <strong>{{ data.weather.current?.pressure_mb || 'â€”' }} mb</strong>
      </div>
      <div>
        Visibility<br>
        <strong>{{ data.weather.current?.vis_km || 'â€”' }} km</strong>
      </div>
    </div>

    <div class="air-quality" *ngIf="data.airQuality">
      <div>
        PM2.5<br>
        <strong>{{ data.airQuality.pm25 || 'â€”' }}</strong>
      </div>
      <div>
        AQI<br>
        <strong>{{ data.airQuality.aqi || 'â€”' }}</strong>
      </div>
      <div>
        NOâ‚‚<br>
        <strong>{{ data.airQuality.no2 || 'â€”' }}</strong>
      </div>
    </div>
  </div>

  <!-- Forecast Card -->
  <div class="card" *ngIf="data.weather?.forecast?.forecastday">
    <h3>ğŸ“… 3-Day Forecast</h3>
    <div class="forecast-grid">
      <div class="forecast-item" *ngFor="let day of data.weather.forecast.forecastday">
        <div class="forecast-date">{{ day.date | slice:5:10 }}</div>
        <img 
          *ngIf="day.day?.condition?.icon" 
          [src]="'https:' + day.day.condition.icon" 
          alt="Weather"
          class="forecast-icon"
        >
        <div class="forecast-temp">
          <span class="max">{{ day.day?.maxtemp_c || 'â€”' }}Â°</span>
          <span class="min">{{ day.day?.mintemp_c || 'â€”' }}Â°</span>
        </div>
        <div class="forecast-condition">{{ day.day?.condition?.text || 'â€”' }}</div>
        <div class="forecast-rain" *ngIf="day.day?.daily_chance_of_rain">
          ğŸ’§ {{ day.day.daily_chance_of_rain }}%
        </div>
      </div>
    </div>
  </div>

  <!-- Music Card -->
  <div class="card" *ngIf="$any(data).music">
    <h3>ğŸ¶ Music</h3>
    
    <!-- Top Tracks -->
    <div class="music-section">
      <h4>ğŸ”¥ Top Tracks</h4>
      <div class="music-list">
        <div class="music-item" *ngFor="let track of $any(data).music.tracks?.slice(0, 5)">
          <div class="track-info">
            <p class="track-name">{{ track.name || 'â€”' }}</p>
            <p class="artist-name">{{ track.artist?.name || 'â€”' }}</p>
          </div>
          <span class="plays" *ngIf="track.playcount">{{ track.playcount }} plays</span>
          <span class="plays" *ngIf="!track.playcount && track.listeners">{{ track.listeners }} listeners</span>
        </div>
      </div>
    </div>

    <!-- Top Artists -->
    <div class="music-section">
      <h4>ğŸ¤ Top Artists</h4>
      <div class="artists-grid">
        <div class="artist-item" *ngFor="let artist of $any(data).music.artists?.slice(0, 5)">
          <p class="artist-name">{{ artist.name || 'â€”' }}</p>
          <span class="listeners" *ngIf="artist.listeners">{{ artist.listeners }} listeners</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Events Card -->
  <div class="card" *ngIf="data.events && data.events.length > 0">
    <h3>Upcoming Events</h3>
    <div>
      <strong>{{ data.events.length }} events</strong>
    </div>
    <div class="event" *ngFor="let event of data.events.slice(0, 2)">
      <div class="event-img" *ngIf="event.image" [style.background-image]="'url(' + event.image + ')'"></div>
      <div class="event-img" *ngIf="!event.image"></div>
      <div>
        <p class="event-title">{{ event.name }}</p>
        <p class="event-text">{{ event.date }} â€” {{ event.venue }}</p>
      </div>
    </div>
  </div>

  <!-- Bikes Card -->
  <div class="card" *ngIf="data.bikes">
    <h3>Bike Sharing</h3>
    <div *ngIf="data.bikes.stations && data.bikes.stations.length > 0">
      <strong>{{ data.bikes.name }}</strong>
      <p class="subtitle">{{ data.bikes.stations.length }} stations available</p>
      <div class="info-grid">
        <div>
          Free bikes<br>
          <strong>{{ data.bikes.stations[0]?.free_bikes || 'â€”' }}</strong>
        </div>
        <div>
          Available slots<br>
          <strong>{{ data.bikes.stations[0]?.empty_slots || 'â€”' }}</strong>
        </div>
      </div>
    </div>
    <div *ngIf="!data.bikes.stations || data.bikes.stations.length === 0">
      <p class="subtitle">No bike sharing available</p>
    </div>
  </div>
</div>

<div class="column empty" *ngIf="!data">
  <p class="subtitle">Select a city to compare</p>
</div>
